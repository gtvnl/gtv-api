<html>
  <head>
    <link rel="stylesheet" type="text/css" href="/css/c3.min.css">
  </head>
  <body>
    <div id="chart"></div>

    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="/js/c3.min.js"></script>
    <script src="/js/jquery-2.1.4.js"></script>
    <script>

    var logs = [];
    var dates = ["Dates"];
    var values = ["Values"];
    var descriptions = ["Descriptions"];


    var settings = {
      "async": true,
      "crossDomain": true,
      "url": "http://192.168.10.158/logs",
      "method": "GET",
      "headers": {
        "content-type": "application/json",
        "authorization": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE0Nzk5ODg3OTJ9.NqphOOMRpr9VL8pqJPo7RcMcvuvxBFzxbaHTwk5oCh0"
      }
    }

    $.ajax(settings).done(function (response) {
      logs = response;

      logs.forEach(function(item) {

        if (item.value != undefined) {
          values.push(item.value);
          dates.push(item.updated_at);
          descriptions.push(item.description);
        }
      });


      var chart = c3.generate({
        bindto: '#chart',
        data: {
          x : 'date',
          xFormat : '%Y-%m-%dT%H:%M:%S.%LZ',
          columns: [
             dates,
             values
          ]
        },

        axis : {
          x : {
            type : 'timeseries',
            tick : {
//              format : "%m/%d" // https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-format
              format : "%e %b %y" // https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-format
            }
          }
        }
      });


    });



      // setTimeout(function () {
      //   chart.load({
      //     columns: [
      //       ['sample', 200, 130, 90, 240, 130, 100],
      //       ['sample2', 300, 200, 160, 400, 250, 250]
      //     ]
      //   });
      // }, 1000);
      // setTimeout(function () {
      //   chart.load({
      //     columns: [
      //       ['date', '20140101', '20140201', '20140301', '20140401', '20140501', '20140601'],
      //       ['sample', 500, 630, 690, 440, 630, 900],
      //       ['sample2', 400, 600, 460, 200, 350, 450]
      //     ]
      //   });
      // }, 2000);
    </script>
  </body>
</html>
